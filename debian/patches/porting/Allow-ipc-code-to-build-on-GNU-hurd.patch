From: Christoph Goehre <chris@sigxcpu.org>
Date: Sat, 6 Aug 2011 17:55:14 +0200
Subject: Allow ipc code to build on GNU/hurd

Thanks: Pino Toscano <pino@debian.org>
---
 mozilla/ipc/chromium/src/base/debug_util_posix.cc  |    2 ++
 .../chromium/src/base/third_party/nspr/prcpucfg.h  |    2 +-
 mozilla/ipc/chromium/src/build/build_config.h      |    2 +-
 3 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/mozilla/ipc/chromium/src/base/debug_util_posix.cc b/mozilla/ipc/chromium/src/base/debug_util_posix.cc
index 72a4ebf..f4c65df 100644
--- a/mozilla/ipc/chromium/src/base/debug_util_posix.cc
+++ b/mozilla/ipc/chromium/src/base/debug_util_posix.cc
@@ -17,8 +17,10 @@
 #include <unistd.h>
 #if MOZ_HAVE_EXECINFO_H
 #include <execinfo.h>
+#ifndef __GNU__
 #include <sys/sysctl.h>
 #endif
+#endif
 
 #include "base/basictypes.h"
 #include "base/eintr_wrapper.h"
diff --git a/mozilla/ipc/chromium/src/base/third_party/nspr/prcpucfg.h b/mozilla/ipc/chromium/src/base/third_party/nspr/prcpucfg.h
index 30fef1b..c7e47ba 100644
--- a/mozilla/ipc/chromium/src/base/third_party/nspr/prcpucfg.h
+++ b/mozilla/ipc/chromium/src/base/third_party/nspr/prcpucfg.h
@@ -34,7 +34,7 @@
 #include "base/third_party/nspr/prcpucfg_win.h"
 #elif defined(__APPLE__)
 #include "base/third_party/nspr/prcpucfg_mac.h"
-#elif defined(__linux__) || defined(ANDROID) || defined(__GLIBC__)
+#elif defined(__linux__) || defined(ANDROID) || defined(__GLIBC__) || defined(__GNU__)
 #include "base/third_party/nspr/prcpucfg_linux.h"
 #elif defined(__OpenBSD__)
 #include "base/third_party/nspr/prcpucfg_openbsd.h"
diff --git a/mozilla/ipc/chromium/src/build/build_config.h b/mozilla/ipc/chromium/src/build/build_config.h
index 14ea695..298a3aa 100644
--- a/mozilla/ipc/chromium/src/build/build_config.h
+++ b/mozilla/ipc/chromium/src/build/build_config.h
@@ -17,7 +17,7 @@
 // A set of macros to use for platform detection.
 #if defined(__APPLE__)
 #define OS_MACOSX 1
-#elif defined(__linux__) || defined(ANDROID) || defined(__GLIBC__)
+#elif defined(__linux__) || defined(ANDROID) || defined(__GLIBC__) || defined(__GNU__)
 #define OS_LINUX 1
 #elif defined(__OpenBSD__)
 #define OS_OPENBSD 1
-- 
