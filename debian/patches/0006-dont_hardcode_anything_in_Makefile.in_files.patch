From: Christoph Goehre <chris@sigxcpu.org>
Date: Wed, 27 Jan 2010 19:07:09 +0100
Subject: [PATCH] dont_hardcode_anything_in_Makefile.in_files

# Don't hardcode anything in Makefile.in files
# With hardcoded names, it's verry hard to build a unbranded mailclient like
# icedove.
# patch by Christoph Goehre <chris@sigxcpu.org> Sat, 26 Dec 2009 11:42:50 +0100
---
 mail/app/Makefile.in |   12 ++++++------
 1 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/mail/app/Makefile.in b/mail/app/Makefile.in
index 19db58c..ed53c62 100644
--- a/mail/app/Makefile.in
+++ b/mail/app/Makefile.in
@@ -80,9 +80,9 @@ PREF_JS_EXPORTS = \
     $(NULL)
 
 ifneq (,$(filter OS2 WINCE WINNT,$(OS_ARCH)))
-PROGRAM = thunderbird$(BIN_SUFFIX)
+PROGRAM = $(MOZ_APP_NAME)$(BIN_SUFFIX)
 else
-PROGRAM = thunderbird-bin$(BIN_SUFFIX)
+PROGRAM = $(MOZ_APP_NAME)-bin$(BIN_SUFFIX)
 endif
 
 REQUIRES = \
@@ -312,18 +312,18 @@ install::
 endif
 
 ifneq (,$(filter-out OS2 WINNT Darwin,$(OS_ARCH)))
-thunderbird:: $(topsrcdir)/mozilla/build/unix/mozilla.in $(GLOBAL_DEPS) $(DEPTH)/config/autoconf.mk
+$(MOZ_APP_NAME):: $(topsrcdir)/mozilla/build/unix/mozilla.in $(GLOBAL_DEPS) $(DEPTH)/config/autoconf.mk
 	cat $< | sed -e "s|%MOZAPPDIR%|$(installdir)|" \
 		-e "s|%MOZ_APP_DISPLAYNAME%|$(MOZ_APP_DISPLAYNAME)|" > $@
 	chmod +x $@
 
-libs:: thunderbird
+libs:: $(MOZ_APP_NAME)
 	$(INSTALL) $< $(DIST)/bin
 
-install:: thunderbird
+install:: $(MOZ_APP_NAME)
 	$(SYSINSTALL) $< $(DESTDIR)$(bindir)
 
-GARBAGE += thunderbird
+GARBAGE += $(MOZ_APP_NAME)
 GARBAGE += $(addprefix $(DIST)/bin/defaults/pref/, all.js all-thunderbird.js channel-prefs.js mailnews.js)
 endif
 
-- 
