From: Takanori MATSUURA <t.matsuu@gmail.com>
Date: Thu, 15 Dec 2011 15:47:04 +0000
Subject: Bug 710268 - Sign NSS libraries only when they exist; r=dtownsend

---
 mozilla/toolkit/mozapps/installer/packager.mk |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/mozilla/toolkit/mozapps/installer/packager.mk b/mozilla/toolkit/mozapps/installer/packager.mk
index 174d059..69edf2c 100644
--- a/mozilla/toolkit/mozapps/installer/packager.mk
+++ b/mozilla/toolkit/mozapps/installer/packager.mk
@@ -558,8 +558,8 @@ FREEBL_64FPU	= $(DIST)/$(STAGEPATH)$(MOZ_PKG_DIR)$(_BINPATH)/$(DLL_PREFIX)freebl
 FREEBL_64INT	= $(DIST)/$(STAGEPATH)$(MOZ_PKG_DIR)$(_BINPATH)/$(DLL_PREFIX)freebl_64int_3$(DLL_SUFFIX)
 
 SIGN_NSS	+= \
-  $(SIGN_CMD) $(SOFTOKN) && \
-  $(SIGN_CMD) $(NSSDBM) && \
+  if test -f $(SOFTOKN); then $(SIGN_CMD) $(SOFTOKN); fi && \
+  if test -f $(NSSDBM); then $(SIGN_CMD) $(NSSDBM); fi && \
   if test -f $(FREEBL); then $(SIGN_CMD) $(FREEBL); fi && \
   if test -f $(FREEBL_32FPU); then $(SIGN_CMD) $(FREEBL_32FPU); fi && \
   if test -f $(FREEBL_32INT); then $(SIGN_CMD) $(FREEBL_32INT); fi && \
@@ -568,7 +568,7 @@ SIGN_NSS	+= \
   if test -f $(FREEBL_64INT); then $(SIGN_CMD) $(FREEBL_64INT); fi;
 
 endif # MOZ_PSM
-endif # !CROSS_COMPILE
+endif # MOZ_CAN_RUN_PROGRAMS
 
 NO_PKG_FILES += \
 	core \
