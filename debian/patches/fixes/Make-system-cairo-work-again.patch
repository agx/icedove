From: =?UTF-8?q?Guido=20G=C3=BCnther?= <agx@sigxcpu.org>
Date: Tue, 12 Jun 2012 20:25:34 +0200
Subject: Make system cairo work again

BZ: https://bugzilla.mozilla.org/show_bug.cgi?id=722975
Patch: https://bug722975.bugzilla.mozilla.org/attachment.cgi?id=624394

---
 mozilla/gfx/thebes/gfxPlatform.cpp | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

diff --git a/mozilla/gfx/thebes/gfxPlatform.cpp b/mozilla/gfx/thebes/gfxPlatform.cpp
index 110558b..da33d99 100644
--- a/mozilla/gfx/thebes/gfxPlatform.cpp
+++ b/mozilla/gfx/thebes/gfxPlatform.cpp
@@ -552,9 +552,7 @@ void SourceBufferDestroy(void *srcSurfUD)
 #if MOZ_TREE_CAIRO
 void SourceSnapshotDetached(cairo_surface_t *nullSurf)
 {
-  gfxImageSurface* origSurf =
-    static_cast<gfxImageSurface*>(cairo_surface_get_user_data(nullSurf, &kSourceSurface));
-
+  gfxImageSurface *origSurf = static_cast<gfxImageSurface*>(nullSurf);
   origSurf->SetData(&kSourceSurface, NULL, NULL);
 }
 #else
