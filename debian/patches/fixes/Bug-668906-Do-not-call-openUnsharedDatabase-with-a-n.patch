From: Steve Fink <sfink@mozilla.com>
Date: Fri, 1 Jul 2011 15:53:41 -0700
Subject: Bug 668906 - Do not call openUnsharedDatabase with a null file
 (r=sdwilsh)

---
 mozilla/storage/src/mozStorageService.cpp |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/mozilla/storage/src/mozStorageService.cpp b/mozilla/storage/src/mozStorageService.cpp
index 564671d..473935d 100644
--- a/mozilla/storage/src/mozStorageService.cpp
+++ b/mozilla/storage/src/mozStorageService.cpp
@@ -499,6 +499,8 @@ NS_IMETHODIMP
 Service::OpenUnsharedDatabase(nsIFile *aDatabaseFile,
                               mozIStorageConnection **_connection)
 {
+  NS_ENSURE_ARG(aDatabaseFile);
+
 #ifdef NS_FUNCTION_TIMER
   nsCString leafname;
   (void)aDatabaseFile->GetNativeLeafName(leafname);
-- 
