From: Christoph Goehre <chris@sigxcpu.org>
Date: Sat, 5 Nov 2011 18:44:56 +0100
Subject: packager fails when $(MOZILLA_DIR) is a relative path.

https://bugzilla.mozilla.org/show_bug.cgi?id=682871

---
 mozilla/toolkit/mozapps/installer/packager.mk |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/mozilla/toolkit/mozapps/installer/packager.mk b/mozilla/toolkit/mozapps/installer/packager.mk
index 6369056..abb1fa4 100644
--- a/mozilla/toolkit/mozapps/installer/packager.mk
+++ b/mozilla/toolkit/mozapps/installer/packager.mk
@@ -401,7 +401,7 @@ PRECOMPILE_GRE=$$PWD
 endif
 
 GENERATE_CACHE = \
-  $(_ABS_RUN_TEST_PROGRAM) $(LIBXUL_DIST)/bin/xpcshell$(BIN_SUFFIX) -g "$(PRECOMPILE_GRE)" -a "$$PWD" -f $(MOZILLA_DIR)/toolkit/mozapps/installer/precompile_cache.js -e "populate_startupcache('$(PRECOMPILE_DIR)', 'omni.jar', 'startupCache.zip');" && \
+  $(_ABS_RUN_TEST_PROGRAM) $(LIBXUL_DIST)/bin/xpcshell$(BIN_SUFFIX) -g "$(PRECOMPILE_GRE)" -a "$$PWD" -f $(call core_abspath,$(MOZILLA_DIR)/toolkit/mozapps/installer/precompile_cache.js) -e "populate_startupcache('$(PRECOMPILE_DIR)', 'omni.jar', 'startupCache.zip');" && \
   rm -rf jsloader && \
   $(UNZIP) startupCache.zip && \
   rm startupCache.zip && \
-- 
