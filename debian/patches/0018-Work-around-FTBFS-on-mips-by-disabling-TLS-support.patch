From: Christoph Goehre <chris@sigxcpu.org>
Date: Sat, 10 Apr 2010 16:20:52 +0200
Subject: [PATCH] Work around FTBFS on mips by disabling TLS support

https://bugzilla.mozilla.org/show_bug.cgi?id=528687
---
 mozilla/configure.in |    9 ++++++++-
 1 files changed, 8 insertions(+), 1 deletions(-)

diff --git a/mozilla/configure.in b/mozilla/configure.in
index 6195bed..04c9e76 100644
--- a/mozilla/configure.in
+++ b/mozilla/configure.in
@@ -4134,7 +4134,14 @@ AC_CACHE_CHECK(for __thread keyword for TLS variables,
                             ac_cv_thread_keyword=no)])
 LDFLAGS=$_SAVE_LDFLAGS
 if test "$ac_cv_thread_keyword" = yes; then
-  AC_DEFINE(HAVE_THREAD_TLS_KEYWORD)
+  case "${target_cpu}" in
+    mips*)
+      :
+      ;;
+    *)
+      AC_DEFINE(HAVE_THREAD_TLS_KEYWORD)
+      ;;
+  esac
 fi
 
 dnl End of C++ language/feature checks
-- 
