From: Mike Hommey <mh@glandium.org>
Date: Sun, 24 Jan 2010 09:39:56 +0100
Subject: [PATCH] Cleanup idl-parser leftovers in make clean

https://bugzilla.mozilla.org/show_bug.cgi?id=541774
---
 mozilla/js/src/xpconnect/src/Makefile.in |    7 ++++++-
 1 files changed, 6 insertions(+), 1 deletions(-)

diff --git a/mozilla/js/src/xpconnect/src/Makefile.in b/mozilla/js/src/xpconnect/src/Makefile.in
index 1c7c902..b251e95 100644
--- a/mozilla/js/src/xpconnect/src/Makefile.in
+++ b/mozilla/js/src/xpconnect/src/Makefile.in
@@ -214,7 +214,7 @@ dom_quickstubs.h dom_quickstubs.cpp: $(srcdir)/dom_quickstubs.qsconf \
 	  -I$(topsrcdir)/xpcom/idl-parser \
 	  $(srcdir)/qsgen.py \
 	  --idlpath=$(DEPTH)/dist/idl \
-	  --cachedir=$(DEPTH)/xpcom/idl-parser \
+	  --cachedir=$(DEPTH)/xpcom/idl-parser/cache \
 	  --header-output dom_quickstubs.h \
 	  --stub-output dom_quickstubs.cpp \
 	  --makedepend-output $(MDDEPDIR)/dom_qsgen.pp \
@@ -224,5 +224,10 @@ dom_quickstubs.h dom_quickstubs.cpp: $(srcdir)/dom_quickstubs.qsconf \
 GARBAGE += \
 		dom_quickstubs.h \
 		dom_quickstubs.cpp \
+		xpidl_debug \
 		$(MDDEPDIR)/dom_qsgen.pp \
+		$(wildcard $(topsrcdir)/other-licenses/ply/ply/*.pyc) \
+		$(wildcard $(topsrcdir)/xpcom/idl-parser/*.pyc) \
 		$(NULL)
+
+GARBAGE_DIRS += $(DEPTH)/xpcom/idl-parser/cache
-- 
