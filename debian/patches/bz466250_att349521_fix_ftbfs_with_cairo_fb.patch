#
# Ubuntu: none
# Upstream: https://bugzilla.mozilla.org/show_bug.cgi?id=466250
# Description: fix FTBFS with cairo 1.8.4 that is built with directfb,
#  triggering some new code, even when directfb was not wanted/detected
#  in configure
#
---
 mozilla/gfx/thebes/src/gfxASurface.cpp |    4 ++++
 1 file changed, 4 insertions(+)

Index: mozilla/mozilla/gfx/thebes/src/gfxASurface.cpp
===================================================================
--- mozilla.orig/mozilla/gfx/thebes/src/gfxASurface.cpp	2010-01-12 11:10:49.000000000 +0000
+++ mozilla/mozilla/gfx/thebes/src/gfxASurface.cpp	2010-01-12 13:25:18.000000000 +0000
@@ -56,8 +56,10 @@
 #endif
 
 #ifdef MOZ_DFB
+#ifdef MOZ_DFB
 #include "gfxDirectFBSurface.h"
 #endif
+#endif
 
 #ifdef CAIRO_HAS_QPAINTER_SURFACE
 #include "gfxQPainterSurface.h"
@@ -172,10 +174,12 @@
     }
 #endif
 #ifdef MOZ_DFB
+#ifdef MOZ_DFB
     else if (stype == CAIRO_SURFACE_TYPE_DIRECTFB) {
         result = new gfxDirectFBSurface(csurf);
     }
 #endif
+#endif
 #ifdef CAIRO_HAS_QPAINTER_SURFACE
     else if (stype == CAIRO_SURFACE_TYPE_QPAINTER) {
         result = new gfxQPainterSurface(csurf);
